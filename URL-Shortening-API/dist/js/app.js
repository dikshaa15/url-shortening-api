const imgHamburger=document.querySelector(".hamburger"),navigation=document.querySelector(".navigation-list"),textInput=document.querySelector(".input-text"),InputSubmit=document.querySelector(".input-submit"),alertUrl=document.querySelector(".alert-url"),sectionShort=document.querySelector(".short-section-url");imgHamburger.addEventListener("click",(()=>{navigation.classList.toggle("navigation-list-active")}));let obj={};textInput.addEventListener("input",(()=>(obj.text=textInput.value,obj))),InputSubmit.addEventListener("click",(()=>{const{text:t}=obj;textInput.value="",validURL(t)?getApi(obj.text):(alertUrl.classList.add("showAlert"),setTimeout((()=>{alertUrl.classList.remove("showAlert")}),2e3))}));const previous=()=>{const t=JSON.parse(sessionStorage.getItem("initial"));return t?.length>0?t:[]};function validURL(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}function again(){previous().forEach((t=>{const e=document.createElement("DIV");e.classList.add("line"),sectionShort.appendChild(e);const n=document.createElement("P");n.classList.add("link"),n.textContent=t.original_link,e.appendChild(n);const i=document.createElement("A");i.classList.add("new-link"),i.href=`https://${t.short_link}`,i.setAttribute("target","_blank"),i.textContent=`https://${t.short_link}`,e.appendChild(i);const o=document.createElement("BUTTON");o.textContent="Copy",o.classList.add("copy-button"),e.appendChild(o),o.addEventListener("click",(()=>{copyToClipboard(i,o)}))}))}async function getApi(t){const e=`https://api.shrtco.de/v2/shorten?url=${t}`,n=await fetch(e),i=(await n.json()).result,{short_link:o,original_link:a}=i,s=document.createElement("DIV");s.classList.add("line"),sectionShort.appendChild(s);const l=document.createElement("P");l.classList.add("link"),l.textContent=a,s.appendChild(l);const r=document.createElement("A");r.classList.add("new-link"),r.href=`https://${o}`,r.setAttribute("target","_blank"),r.textContent=`https://${o}`,s.appendChild(r);const c=document.createElement("BUTTON");c.textContent="Copy",c.classList.add("copy-button"),s.appendChild(c),c.addEventListener("click",(()=>{copyToClipboard(r,c)}));const d=previous();d.push({short_link:o,original_link:a}),sessionStorage.setItem("initial",JSON.stringify(d))}function copyToClipboard(t,e){navigator.clipboard.writeText(t.href),e.textContent="Copied!",e.classList.add("copied"),setTimeout((()=>{e.textContent="Copy",e.classList.remove("copied")}),3e3)}again();